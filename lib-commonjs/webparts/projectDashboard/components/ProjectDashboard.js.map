{"version":3,"file":"ProjectDashboard.js","sourceRoot":"","sources":["../../../../src/webparts/projectDashboard/components/ProjectDashboard.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useMemo, useState } from 'react';\nimport { FilterPanel } from './FilterPanel';\nimport { SearchBox } from './SearchBox';\nimport { LoadingSpinner } from './LoadingSpinner';\nimport { ProjectCard } from './ProjectCard';\nimport { ProjectRow } from './ProjectRow';\nimport { useProjects } from '../hooks/useProjects';\nimport { ProjectStatus } from '../models/types';\n\nexport const ProjectDashboard: React.FC<{ projectsListTitle: string; tasksListTitle: string }> = ({\n  projectsListTitle, tasksListTitle,\n}) => {\n  const { projects, loading, error, reload, managers, statuses } = useProjects({\n    projectsListTitle, tasksListTitle,\n  });\n\n  const [search, setSearch] = useState('');\n  const [status, setStatus] = useState<ProjectStatus | 'All'>('All');\n  const [managerId, setManagerId] = useState<number | 'All'>('All');\n  const [view, setView] = useState<'cards' | 'table'>('cards');\n\n  const filtered = useMemo(() => {\n    const term = search.trim().toLowerCase();\n    return projects.filter(p => {\n      const matchesSearch = term.length === 0 || p.name.toLowerCase().includes(term);\n      const matchesStatus = status === 'All' || p.status === status;\n      const matchesManager = managerId === 'All' || (p.manager && p.manager.id === managerId);\n      return matchesSearch && matchesStatus && matchesManager;\n    });\n  }, [projects, search, status, managerId]);\n\n  return (\n    <div style={{ padding: 12 }}>\n      <div style={{ display: 'grid', gridTemplateColumns: '1fr auto', gap: 12, alignItems: 'start' }}>\n        <SearchBox value={search} onChange={setSearch} />\n        <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\n          <FilterPanel\n            statuses={statuses}\n            managers={managers}\n            selectedStatus={status}\n            onStatusChange={setStatus}\n            selectedManagerId={managerId}\n            onManagerChange={setManagerId}\n          />\n          <select value={view} onChange={e => setView(e.target.value as 'cards' | 'table')} style={{ padding: '6px 8px' }}>\n            <option value=\"cards\">Tarjetas</option>\n            <option value=\"table\">Tabla</option>\n          </select>\n        </div>\n      </div>\n\n      {loading && <LoadingSpinner label=\"Cargando proyectos y tareas...\" />}\n\n      {error && (\n        <div role=\"alert\" style={{ border: '1px solid #f3c7c9', background: '#fde7e9', color: '#a4262c', padding: 10, borderRadius: 6, marginTop: 12 }}>\n          <div style={{ fontWeight: 700, marginBottom: 4 }}>Error</div>\n          <div>{error}</div>\n          <button onClick={reload} style={{ marginTop: 8, padding: '6px 10px', border: '1px solid #a4262c', background: '#fff', color: '#a4262c', borderRadius: 4 }}>\n            Reintentar\n          </button>\n        </div>\n      )}\n\n      {!loading && !error && filtered.length === 0 && (\n        <div style={{ color: '#666', padding: 8, marginTop: 12 }}>No hay proyectos que coincidan con los filtros/b√∫squeda.</div>\n      )}\n\n      {!loading && !error && filtered.length > 0 && view === 'cards' && (\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', gap: 12, marginTop: 12 }}>\n          {filtered.map(p => <ProjectCard key={p.id} project={p} />)}\n        </div>\n      )}\n\n      {!loading && !error && filtered.length > 0 && view === 'table' && (\n        <div style={{ overflowX: 'auto', marginTop: 12 }}>\n          <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n            <thead>\n              <tr style={{ background: '#f3f2f1' }}>\n                <th style={{ textAlign: 'left', padding: 8 }}>Nombre</th>\n                <th style={{ textAlign: 'left', padding: 8 }}>Gerente</th>\n                <th style={{ textAlign: 'left', padding: 8 }}>Estado</th>\n                <th style={{ textAlign: 'left', padding: 8 }}>Prioridad</th>\n                <th style={{ textAlign: 'right', padding: 8 }}>Presupuesto</th>\n                <th style={{ textAlign: 'right', padding: 8 }}>Tareas</th>\n                <th style={{ textAlign: 'right', padding: 8 }}>Completadas</th>\n                <th style={{ textAlign: 'left', padding: 8 }}>Progreso</th>\n                <th style={{ textAlign: 'left', padding: 8 }}>Indicadores</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filtered.map(p => <ProjectRow key={p.id} project={p} />)}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n"]}